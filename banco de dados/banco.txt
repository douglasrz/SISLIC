
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS "fornecedor" (
  "id_fornecedor" SERIAL NOT NULL ,
  "razao_social" VARCHAR(50) NOT NULL ,
  "telefone" VARCHAR(20) NULL ,
  "pontucao" INT NULL ,
  PRIMARY KEY ("id_fornecedor") );


-- -----------------------------------------------------
-- Table "funcionario"
-- -----------------------------------------------------
DROP TABLE IF EXISTS "funcionario" ;

CREATE  TABLE IF NOT EXISTS "funcionario" (
  "id_funcionario" SERIAL NOT NULL  ,
  "nome" VARCHAR(45) NOT NULL ,
  "telefone" VARCHAR(45) NULL ,
  "cargo" VARCHAR(45) NOT NULL ,
  PRIMARY KEY ("id_funcionario") )
;



CREATE  TABLE IF NOT EXISTS "pedido" (
  "id_pedido" SERIAL NOT NULL  ,
  "data_lancamento" DATE NOT NULL ,
  "data_limite" DATE NOT NULL ,
  "id_funcionario" INT NULL ,
  PRIMARY KEY ("id_pedido") ,
  INDEX "id_funcionario" ("id_funcionario" ASC) ,
  CONSTRAINT "id_funcionario"
    FOREIGN KEY ("id_funcionario" )
    REFERENCES "funcionario" ("id_funcionario" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


CREATE  TABLE IF NOT EXISTS "unidade" (
  "id_unidade" SERIAL NOT NULL  ,
  "medida" VARCHAR(20) NOT NULL ,
  PRIMARY KEY ("id_unidade") )
;


CREATE  TABLE IF NOT EXISTS "produto" (
  "id_produto" SERIAL NOT NULL  ,
  "nome" VARCHAR(45) NOT NULL ,
  "descricao" VARCHAR(45) NULL ,
  "id_unidade" INT NULL ,
  PRIMARY KEY ("id_produto") ,
  INDEX "id_medida" ("id_unidade" ASC) ,
  CONSTRAINT "id_medida"
    FOREIGN KEY ("id_unidade" )
    REFERENCES "unidade" ("id_unidade" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


CREATE  TABLE IF NOT EXISTS "categoria" (
  "id_categoria" SERIAL NOT NULL  ,
  "nome" VARCHAR(45) NOT NULL ,
  "descricao" VARCHAR(65) NULL ,
  PRIMARY KEY ("id_categoria") )
;


CREATE  TABLE IF NOT EXISTS "item_pedido" (
  "id_item_pedido" SERIAL NOT NULL  ,
  "quantidade" INT NULL ,
  "preco_unitario" FLOAT NULL ,
  "id_produto" INT NOT NULL ,
  "id_pedido" INT NOT NULL ,
  PRIMARY KEY ("id_item_pedido") ,
  INDEX "id_produto" ("id_produto" ASC) ,
  INDEX "fk_itemPedido_pedido1" ("id_pedido" ASC) ,
  CONSTRAINT "id_produto"
    FOREIGN KEY ("id_produto" )
    REFERENCES "produto" ("id_produto" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT "fk_itemPedido_pedido1"
    FOREIGN KEY ("id_pedido" )
    REFERENCES "pedido" ("id_pedido" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


CREATE  TABLE IF NOT EXISTS "catetogia_fornecedor" (
  "id_catetogia_fornecedor" SERIAL NOT NULL  ,
  "id_categoria" INT NOT NULL ,
  "id_fornecedor" INT NULL ,
  INDEX "id_categoria" ("id_categoria" ASC) ,
  PRIMARY KEY ("id_catetogia_fornecedor") ,
  INDEX "id_fornecedor" ("id_fornecedor" ASC) ,
  CONSTRAINT "id_categoria"
    FOREIGN KEY ("id_categoria" )
    REFERENCES "categoria" ("id_categoria" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT "id_fornecedor"
    FOREIGN KEY ("id_fornecedor" )
    REFERENCES "fornecedor" ("id_fornecedor" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


CREATE  TABLE IF NOT EXISTS "lance" (
  "id_lance" SERIAL NOT NULL  ,
  "valor_total" FLOAT NOT NULL ,
  "id_pedido" INT NOT NULL ,
  "id_fornecedor" INT NOT NULL ,
  "data" DATE NULL ,
  PRIMARY KEY ("id_lance") ,
  INDEX "id_pedido" ("id_pedido" ASC) ,
  INDEX "id_fornecedor" ("id_fornecedor" ASC) ,
  CONSTRAINT "id_pedido"
    FOREIGN KEY ("id_pedido" )
    REFERENCES "pedido" ("id_pedido" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT "id_fornecedor"
    FOREIGN KEY ("id_fornecedor" )
    REFERENCES "fornecedor" ("id_fornecedor" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;


CREATE  TABLE IF NOT EXISTS "log_penalidade" (
  "id_log_pontuacao" SERIAL NOT NULL  ,
  "id_fornecedor" INT NOT NULL ,
  "id_funcionario" INT NOT NULL ,
  "descricao" VARCHAR(45) NULL ,
  "valor" INT NULL ,
  PRIMARY KEY ("id_log_pontuacao") ,
  INDEX "id_fornecedor" ("id_fornecedor" ASC) ,
  INDEX "id_funcionario" ("id_funcionario" ASC) ,
  CONSTRAINT "id_fornecedor"
    FOREIGN KEY ("id_fornecedor" )
    REFERENCES "fornecedor" ("id_fornecedor" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT "id_funcionario"
    FOREIGN KEY ("id_funcionario" )
    REFERENCES "funcionario" ("id_funcionario" )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
;






